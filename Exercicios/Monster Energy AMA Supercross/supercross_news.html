<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supercross News</title>
    <style>
        body {
            font-family: 'Kiona Regular';
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .header {
            text-align: center;
            background-color: #080808;
            padding: 20px;
            color: white;
        }
        .nav-menu {
            background-color: #080808;
            padding: 10px;
            text-align: center;
        }
        .nav-menu a {
            font-family: 'Kiona Regular';
            color: #08ff08;
            margin: 0 20px;
            text-decoration: none;
            font-size: 20px;
        }
        .header img.supercross-logo {
            width: 400px;
            margin-bottom: 10px;
        }
        .container {
            display: flex;
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            gap: 20px;
        }
        .sidebar-left, .sidebar-right {
            flex: 1;
            background-color: #fff;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .news-section {
            flex: 3;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .news-card {
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 20px;
            cursor: pointer;
        }
        .news-card img {
            width: 100%;
            height: auto;
            max-height: 200px;
            object-fit: cover;
            margin-bottom: 10px;
        }
        .news-card h3 {
            margin: 0 0 10px;
            color: #080808;
        }
        .news-card p {
            margin: 0 0 10px;
        }
        .news-full img {
            width: 100%;
            max-width: 600px;
            height: auto;
            object-fit: cover;
            margin-bottom: 15px;
        }
        .news-full h2 {
            color: #080808;
            margin-top: 0;
        }
        .news-full .summary {
            font-style: italic;
            margin-bottom: 15px;
        }
        .news-full .full-text {
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .news-full .back-button {
            background-color: #080808;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 16px;
        }
        .news-full .back-button:hover {
            background-color: #080808;
        }
        .sidebar-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        .sidebar-table th, .sidebar-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .sidebar-table th {
            background-color: #080808;
            color: white;
        }
        .sidebar-table img {
            width: 40px;
            height: 24px;
            object-fit: contain;
            vertical-align: middle;
        }
        .next-race h3, .sidebar-left h3, .sidebar-right h3 {
            color: #080808;
            margin-top: 0;
        }
        .next-race input, .next-race button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .next-race button {
            background-color: #080808;
            color: white;
            border: none;
            cursor: pointer;
        }
        .next-race button:hover {
            background-color: #080808;
        }
        .add-news-form {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }
        .add-news-form input, .add-news-form textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .add-news-form button {
            background-color: #080808;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 3px;
        }
        .add-news-form button:hover {
            background-color: #080808;
        }
        .tabs {
            display: flex;
            margin-bottom: 10px;
        }
        .tab {
            padding: 10px 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            cursor: pointer;
            flex: 1;
            text-align: center;
        }
        .tab.active {
            background-color: #080808;
            color: white;
            border-color: #080808;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .footer {
            background-color: #080808;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
        .footer a {
            color: #08ff08;
            margin: 0 10px;
            text-decoration: none;
        }

        input[type="file"] {
            display: none;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .sidebar-left, .sidebar-right, .news-section {
                flex: none;
                width: 100%;
            }
            .tabs {
                flex-direction: column;
            }
            .tab {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="nav-menu">
        <a href="supercross_standings.html">Standings</a>
        <a href="supercross_titles.html">Titles</a>
        <a href="supercross_news.html" class="active">News</a>
        <a href="supercross_admin.html">Admin</a>
        <a href="esports-titles.html">eSports Titles</a>
    </div>
    <div class="header">
        <img src="./images/supercross-live-logo.png" alt="Supercross Logo" class="supercross-logo">
    </div>

    <div class="container">
        <!-- Sidebar Esquerda: Standings -->
        <aside class="sidebar-left">
            <h3>Supercross Standings (Top 5)</h3>
            <div class="tabs">
                <div class="tab active" onclick="showTab('450sx')">450SX</div>
                <div class="tab" onclick="showTab('250sx-east')">250SX East</div>
                <div class="tab" onclick="showTab('250sx-west')">250SX West</div>
            </div>
            <div id="standings-450sx" class="tab-content active">
                <table class="sidebar-table" id="standings-table-450sx">
                    <thead>
                        <tr>
                            <th>Pos</th>
                            <th>Rider</th>
                            <th>Points</th>
                        </tr>
                    </thead>
                    <tbody id="standings-tbody-450sx">
                        <!-- Dados serão carregados via JavaScript -->
                    </tbody>
                </table>
            </div>
            <div id="standings-250sx-east" class="tab-content">
                <table class="sidebar-table" id="standings-table-250sx-east">
                    <thead>
                        <tr>
                            <th>Pos</th>
                            <th>Rider</th>
                            <th>Points</th>
                        </tr>
                    </thead>
                    <tbody id="standings-tbody-250sx-east">
                        <!-- Dados serão carregados via JavaScript -->
                    </tbody>
                </table>
            </div>
            <div id="standings-250sx-west" class="tab-content">
                <table class="sidebar-table" id="standings-table-250sx-west">
                    <thead>
                        <tr>
                            <th>Pos</th>
                            <th>Rider</th>
                            <th>Points</th>
                        </tr>
                    </thead>
                    <tbody id="standings-tbody-250sx-west">
                        <!-- Dados serão carregados via JavaScript -->
                    </tbody>
                </table>
            </div>
        </aside>

        <!-- Seção Central: Notícias -->
        <main class="news-section">
            <h2>Supercross News</h2>
            <div class="news-list" id="news-list">
                <div class="add-news-form">
                    <h3>Add New News</h3>
                    <input type="text" id="news-title" placeholder="News Title">
                    <input type="file" id="news-image" accept="image/*">
                    <label for="news-image" class="news-image-label">Choose Image</label>
                    <textarea id="news-summary" placeholder="News Summary" rows="4"></textarea>
                    <textarea id="news-full-text" placeholder="Full Text" rows="6"></textarea>
                    <button onclick="addNews()">Add News</button>
                </div>
                <div id="news-container">
                    <!-- Notícias serão carregadas via JavaScript -->
                </div>
            </div>
            <div class="news-full hidden" id="news-full">
                <h2 id="full-title"></h2>
                <img id="full-image" src="" alt="">
                <p class="summary" id="full-summary"></p>
                <div class="full-text" id="full-text"></div>
                <button class="back-button" onclick="goBack()">Back to News</button>
            </div>
        </main>

        <!-- Sidebar Direita: Titles e Próxima Corrida -->
        <aside class="sidebar-right">
            <h3>Titles Leaders</h3>
            <div id="titles-leaders">
                <h4>450SX</h4>
                <p><strong>Rider:</strong> <span id="leader-rider-450sx"></span></p>
                <p><strong>Team:</strong> <span id="leader-team-450sx"></span></p>
                <p><strong>Manufacturer:</strong> <span id="leader-manufacturer-450sx"></span></p>
                <h4>250SX East</h4>
                <p><strong>Rider:</strong> <span id="leader-rider-250sx-east"></span></p>
                <p><strong>Team:</strong> <span id="leader-team-250sx-east"></span></p>
                <p><strong>Manufacturer:</strong> <span id="leader-manufacturer-250sx-east"></span></p>
                <h4>250SX West</h4>
                <p><strong>Rider:</strong> <span id="leader-rider-250sx-west"></span></p>
                <p><strong>Team:</strong> <span id="leader-team-250sx-west"></span></p>
                <p><strong>Manufacturer:</strong> <span id="leader-manufacturer-250sx-west"></span></p>
            </div>
            <div class="next-race">
                <h3>Next Race</h3>
                <input type="text" id="race-name" placeholder="Race Name">
                <input type="text" id="race-date" placeholder="Date (e.g., MM/DD/YYYY)">
                <input type="text" id="race-location" placeholder="Location">
                <input type="text" id="race-time" placeholder="Time (e.g., 3:00 PM)">
                <button onclick="saveNextRace()">Save Race Info</button>
            </div>
        </aside>
    </div>

    <div class="footer">
        <p>© 2025 Supercross Fan Template | All Rights Reserved</p>
        <p>
            <a href="#">Race Schedule</a> |
            <a href="#">Latest News</a> |
            <a href="#">Rider Profiles</a> |
            <a href="#">Shop Merchandise</a> |
            <a href="#">Contact Us</a>
        </p>
    </div>

    <script>
        // Função para redimensionar imagens com alta qualidade
        function resizeImage(file, maxWidth, maxHeight, callback) {
            const img = new Image();
            img.onload = () => {
                let width = img.width;
                let height = img.height;
                const ratio = Math.min(maxWidth / width, maxHeight / height);
                width = Math.round(width * ratio);
                height = Math.round(height * ratio);

                let srcCanvas = document.createElement('canvas');
                let srcCtx = srcCanvas.getContext('2d');
                srcCanvas.width = img.width;
                srcCanvas.height = img.height;
                srcCtx.imageSmoothingEnabled = true;
                srcCtx.imageSmoothingQuality = 'high';
                srcCtx.drawImage(img, 0, 0);

                let currentWidth = img.width;
                let currentHeight = img.height;
                while (currentWidth > width * 1.5 && currentHeight > height * 1.5) {
                    currentWidth = Math.round(currentWidth / 1.5);
                    currentHeight = Math.round(currentHeight / 1.5);
                    const stepCanvas = document.createElement('canvas');
                    const stepCtx = stepCanvas.getContext('2d');
                    stepCanvas.width = currentWidth;
                    stepCanvas.height = currentHeight;
                    stepCtx.imageSmoothingEnabled = true;
                    stepCtx.imageSmoothingQuality = 'high';
                    stepCtx.drawImage(srcCanvas, 0, 0, currentWidth, currentHeight);
                    srcCanvas = stepCanvas;
                }

                const finalCanvas = document.createElement('canvas');
                const finalCtx = finalCanvas.getContext('2d');
                finalCanvas.width = maxWidth;
                finalCanvas.height = maxHeight;
                finalCtx.imageSmoothingEnabled = true;
                finalCtx.imageSmoothingQuality = 'high';
                const xOffset = (maxWidth - width) / 2;
                const yOffset = (maxHeight - height) / 2;
                finalCtx.drawImage(srcCanvas, xOffset, yOffset, width, height);

                callback(finalCanvas.toDataURL('image/png', 1.0));
            };
            img.src = URL.createObjectURL(file);
        }

        // Função para carregar notícias do localStorage
        function loadNews() {
            const newsContainer = document.getElementById('news-container');
            const savedNews = localStorage.getItem('supercross_news_data');
            let newsData = savedNews ? JSON.parse(savedNews) : [
                {
                    title: 'Eli Tomac Dominates Anaheim Opener',
                    image: './images/sx-news1.jpg',
                    summary: 'Eli Tomac takes a commanding win at the 2025 season opener in Anaheim.',
                    fullText: 'Eli Tomac kicked off the 2025 Monster Energy AMA Supercross season with a stunning victory at Anaheim 1. Mastering the challenging track, Tomac led from start to finish, fending off a strong challenge from Cooper Webb. His performance sets the tone for another championship chase, with fans buzzing about his aggressive riding style and flawless execution.'
                },
                {
                    title: 'New Rules Shake Up Supercross 2025',
                    image: './images/sx-news2.jpg',
                    summary: 'The 2025 season introduces new regulations impacting bike setups and race formats.',
                    fullText: 'The 2025 Monster Energy AMA Supercross season brings significant rule changes, including updated bike weight limits and a revised points system. Teams like Red Bull KTM and Monster Energy Kawasaki have been testing new setups to adapt. Riders have mixed reactions, with some praising the focus on safety and others concerned about competitive balance. The changes debuted at Anaheim 1, sparking heated discussions among fans.'
                },
                {
                    title: 'Chase Sexton Signs with New Team',
                    image: './images/sx-news3.jpg',
                    summary: 'Chase Sexton joins a top team for the 2025 Supercross season, raising expectations.',
                    fullText: 'Chase Sexton has signed with Rockstar Energy Husqvarna for the 2025 season, a move that has shocked the Supercross community. After a strong 2024, Sexton aims to challenge for the title with his new team. His debut at Anaheim 1 showed promise, finishing in the top three. Fans and analysts are eager to see how this partnership will shape the championship race.'
                }
            ];

            newsData = newsData.map(news => ({
                title: news.title,
                image: news.image,
                summary: news.summary,
                fullText: news.fullText || 'No full text available for this news.'
            }));

            localStorage.setItem('supercross_news_data', JSON.stringify(newsData));

            newsContainer.innerHTML = '';
            newsData.forEach((news, index) => {
                const newsCard = document.createElement('div');
                newsCard.className = 'news-card';
                newsCard.innerHTML = `
                    <img src="${news.image}" alt="${news.title}">
                    <h3>${news.title}</h3>
                    <p>${news.summary}</p>
                `;
                newsCard.onclick = () => showFullNews(index);
                newsContainer.appendChild(newsCard);
            });
        }

        // Função para exibir a notícia completa
        function showFullNews(index) {
            const savedNews = JSON.parse(localStorage.getItem('supercross_news_data'));
            const news = savedNews[index];

            document.getElementById('news-list').classList.add('hidden');
            document.getElementById('news-full').classList.remove('hidden');

            document.getElementById('full-title').innerText = news.title;
            document.getElementById('full-image').src = news.image;
            document.getElementById('full-image').alt = news.title;
            document.getElementById('full-summary').innerText = news.summary;
            document.getElementById('full-text').innerText = news.fullText;
        }

        // Função para voltar à lista de notícias
        function goBack() {
            document.getElementById('news-full').classList.add('hidden');
            document.getElementById('news-list').classList.remove('hidden');
        }

        // Função para adicionar nova notícia
        function addNews() {
            const title = document.getElementById('news-title').value;
            const imageInput = document.getElementById('news-image');
            const summary = document.getElementById('news-summary').value;
            const fullText = document.getElementById('news-full-text').value;

            if (!title || !summary || !fullText) {
                alert('Please fill in all fields.');
                return;
            }

            const savedNews = localStorage.getItem('supercross_news_data');
            let newsData = savedNews ? JSON.parse(savedNews) : [];

            if (imageInput.files[0]) {
                resizeImage(imageInput.files[0], 600, 400, (dataUrl) => {
                    newsData.unshift({
                        title,
                        image: dataUrl,
                        summary,
                        fullText
                    });
                    localStorage.setItem('supercross_news_data', JSON.stringify(newsData));
                    loadNews();
                    clearNewsForm();
                });
            } else {
                newsData.unshift({
                    title,
                    image: './images/placeholder-logo.png',
                    summary,
                    fullText
                });
                localStorage.setItem('supercross_news_data', JSON.stringify(newsData));
                loadNews();
                clearNewsForm();
            }
        }

        // Função para limpar o formulário de notícias
        function clearNewsForm() {
            document.getElementById('news-title').value = '';
            document.getElementById('news-image').value = '';
            document.getElementById('news-summary').value = '';
            document.getElementById('news-full-text').value = '';
            document.querySelector('.news-image-label').textContent = 'Choose Image';
        }

        // Função para carregar standings na sidebar esquerda
        function loadStandings(category) {
            const tbody = document.getElementById(`standings-tbody-${category}`);
            const savedData = localStorage.getItem(`supercross_${category}_data`);
            let data = savedData ? JSON.parse(savedData) : getDefaultStandingsData(category);

            data.sort((a, b) => parseInt(b.points) - parseInt(a.points));
            data = data.slice(0, 5);

            tbody.innerHTML = '';
            data.forEach((row, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${row.rider}</td>
                    <td>${row.points}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Dados padrão para standings
        function getDefaultStandingsData(category) {
            const defaultData = {
                '450sx': [
                    { rider: 'Eli Tomac', points: '350' },
                    { rider: 'Cooper Webb', points: '330' },
                    { rider: 'Chase Sexton', points: '310' },
                    { rider: 'Jason Anderson', points: '290' },
                    { rider: 'Ken Roczen', points: '270' }
                ],
                '250sx-east': [
                    { rider: 'Haiden Deegan', points: '180' },
                    { rider: 'Tom Vialle', points: '170' },
                    { rider: 'Hunter Lawrence', points: '160' },
                    { rider: 'Max Anstie', points: '150' },
                    { rider: 'Chance Hymas', points: '140' }
                ],
                '250sx-west': [
                    { rider: 'Jett Lawrence', points: '185' },
                    { rider: 'Levi Kitchen', points: '175' },
                    { rider: 'RJ Hampshire', points: '165' },
                    { rider: 'Jo Shimoda', points: '155' },
                    { rider: 'Nate Thrasher', points: '145' }
                ]
            };
            return defaultData[category];
        }

        // Função para carregar líderes de títulos na sidebar direita
        function loadTitlesLeaders(category) {
            const riderLeader = document.getElementById(`leader-rider-${category}`);
            const teamLeader = document.getElementById(`leader-team-${category}`);
            const manufacturerLeader = document.getElementById(`leader-manufacturer-${category}`);

            let ridersData = localStorage.getItem(`supercross_riders_titles_${category}`);
            ridersData = ridersData ? JSON.parse(ridersData) : getDefaultTitlesData('riders', category);
            ridersData.sort((a, b) => parseInt(b.titles) - parseInt(a.titles));
            riderLeader.innerText = `${ridersData[0].rider} (${ridersData[0].titles} titles)`;

            let teamsData = localStorage.getItem(`supercross_teams_titles_${category}`);
            teamsData = teamsData ? JSON.parse(teamsData) : getDefaultTitlesData('teams', category);
            teamsData.sort((a, b) => parseInt(b.titles) - parseInt(a.titles));
            teamLeader.innerHTML = `<img src="${teamsData[0].nameSrc}" alt="${teamsData[0].nameAlt}" style="width: 40px; height: 24px; vertical-align: middle;"> ${teamsData[0].nameAlt} (${teamsData[0].titles} titles)`;

            let manufacturersData = localStorage.getItem(`supercross_manufacturers_titles_${category}`);
            manufacturersData = manufacturersData ? JSON.parse(manufacturersData) : getDefaultTitlesData('manufacturers', category);
            manufacturersData.sort((a, b) => parseInt(b.titles) - parseInt(a.titles));
            manufacturerLeader.innerHTML = `<img src="${manufacturersData[0].nameSrc}" alt="${manufacturersData[0].nameAlt}" style="width: 40px; height: 24px; vertical-align: middle;"> ${manufacturersData[0].nameAlt} (${manufacturersData[0].titles} titles)`;
        }

        // Dados padrão para títulos
        function getDefaultTitlesData(tableName, category) {
            const defaultData = {
                riders: {
                    '450sx': [{ rider: 'Ricky Carmichael', titles: '7' }],
                    '250sx-east': [{ rider: 'Hunter Lawrence', titles: '2' }],
                    '250sx-west': [{ rider: 'Jett Lawrence', titles: '2' }]
                },
                teams: {
                    '450sx': [{ nameSrc: './images/monster-energy-kawasaki-logo.png', nameAlt: 'Monster Energy Kawasaki', titles: '3' }],
                    '250sx-east': [{ nameSrc: './images/monster-energy-yamaha-logo.png', nameAlt: 'Monster Energy Yamaha', titles: '3' }],
                    '250sx-west': [{ nameSrc: './images/monster-energy-yamaha-logo.png', nameAlt: 'Monster Energy Yamaha', titles: '2' }]
                },
                manufacturers: {
                    '450sx': [{ nameSrc: './images/honda-logo.png', nameAlt: 'Honda', titles: '15' }],
                    '250sx-east': [{ nameSrc: './images/yamaha-logo.png', nameAlt: 'Yamaha', titles: '8' }],
                    '250sx-west': [{ nameSrc: './images/yamaha-logo.png', nameAlt: 'Yamaha', titles: '7' }]
                }
            };
            return defaultData[tableName][category];
        }

        // Função para carregar informações da próxima corrida
        function loadNextRace() {
            const savedRace = localStorage.getItem('supercross_next_race');
            const raceData = savedRace ? JSON.parse(savedRace) : {
                name: 'Next Race TBD',
                date: 'TBD',
                location: 'TBD',
                time: 'TBD'
            };

            document.getElementById('race-name').value = raceData.name;
            document.getElementById('race-date').value = raceData.date;
            document.getElementById('race-location').value = raceData.location;
            document.getElementById('race-time').value = raceData.time;
        }

        // Função para salvar informações da próxima corrida
        function saveNextRace() {
            const raceData = {
                name: document.getElementById('race-name').value || 'Next Race TBD',
                date: document.getElementById('race-date').value || 'TBD',
                location: document.getElementById('race-location').value || 'TBD',
                time: document.getElementById('race-time').value || 'TBD'
            };

            localStorage.setItem('supercross_next_race', JSON.stringify(raceData));
            alert('Next race information saved!');
        }

        // Função para alternar abas
        function showTab(category) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${category}')"]`).classList.add('active');
            document.getElementById(`standings-${category}`).classList.add('active');
        }

        // Carregar dados ao iniciar a página
        loadNews();
        ['450sx', '250sx-east', '250sx-west'].forEach(category => {
            loadStandings(category);
            loadTitlesLeaders(category);
        });
        loadNextRace();

        // Adicionar evento para o input de imagem de notícias
        document.getElementById('news-image').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                document.querySelector('.news-image-label').textContent = file.name;
            }
        });
    </script>
</body>
</html>